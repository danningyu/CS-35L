Danning Yu
305087992

Lab 3 Log

Create shell script - copied the la script into a file and
made it an executable.

Verification that problem exists: running /usr/bin/ls -a -A gives the same
result as /usr/bin/ls -A -a. The . and .. are displayed.

ls Coreutils version: 8.22

To download the files:
Tarball: wget ftp://ftp.gnu.org/gnu/coreutils/coreutils-8.29.tar.xz
Tarball sig.: wget ftp://ftp.gnu.org/gnu/coreutils/coreutils-8.29.tar.xz.sig
GNU keyring: wget https://ftp.gnu.org/gnu/gnu-keyring.gpg

Verfiy signature:
gpg --verify --keyring ./gnu-keyring.gpg coreutils-8.29.tar.xz.sig
It outputs 3 good signature statements, and then the following statement:
WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.

This occurs because the key has not been verified, as it could have been
generated by anyone. 

Unzipped file:
tar -xJvf coreutils-8.29.tar.xz

Made directory for installtion:
~/cuinstall (core util install)

Installing it:
./configure --prefix=[absolute path].../cuinstall
make
make install

Then to reproduce the bug in my newly installed coreutils:
/u/ma/ugrad/danning/cslab/cuinstall/bin/ls -a -A

This command prints out ., .., bin, libexec, and share, so the bug is there.

Then download patch:
In ~/coreutils-8.29, I created a file called lsfix.patch.
Then I opened the patch file and copied the diff file portion into a file
called lsfix.patch.
patch -p1 < lsfix.patch

Errors: 
Hunk #1 FAILED at 4.
1 out of 1 hunk FAILED -- saving rejects to file NEWS.rej

It says the file tests/local.mk and tests/ls/a-option.sh were patched.

Then when I type make, it returns the error: 'automake-1.15' is missing on
your system. THis occurs because local.mk is modified, which is related to
configure.ac. Thus, configure needs to be rerun, or else automake won't work.

To solve this issue, the command autoreconf -fi must be used. This remakes
the build system files: -f forces all files to be considered obsolete and
-i looks for any missing files and copies them.

Then use make again.

To test the new version of ls:
/u/ma/ugrad/danning/cslab/coreutils-8.29/src/ls -a -A
This command does not print out . and .., confirming that the patch worked.
